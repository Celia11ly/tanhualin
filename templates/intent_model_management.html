<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>意图模型管理 - NGD智能客服对话模块</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary: #6366f1;
            --dark-card: #1f2937;
        }
        .bg-dark-card {
            background-color: var(--dark-card);
        }
        .text-primary {
            color: var(--primary);
        }
        .bg-primary {
            background-color: var(--primary);
        }
        .hover\:bg-primary\/90:hover {
            background-color: rgba(99, 102, 241, 0.9);
        }
        .focus\:ring-primary:focus {
            ring-color: var(--primary);
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold">意图模型管理</h1>
                <div class="flex gap-2">
                    <a href="/module/NGD智能客服对话模块" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 flex items-center gap-1">
                        <i class="fa fa-arrow-left"></i> 返回上一层
                    </a>
                    <a href="/" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 flex items-center gap-1">
                        <i class="fa fa-home"></i> 返回首页
                    </a>
                </div>
            </div>
            <div class="border-b border-gray-200 dark:border-gray-700">
                <nav class="flex space-x-8">
                    <a href="/module/NGD智能客服对话模块/意图模型管理" class="pb-4 text-lg font-medium text-primary border-b-2 border-primary dark:text-primary transition-all duration-200" id="nav-model-list">
                        模型列表
                    </a>
                    <a href="/module/NGD智能客服对话模块/意图模型管理/新增模型" class="pb-4 text-lg font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 border-b-2 border-transparent transition-all duration-200" id="nav-add-model">
                        新增模型
                    </a>
                    <a href="/module/NGD智能客服对话模块/意图模型管理/模型测试" class="pb-4 text-lg font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 border-b-2 border-transparent transition-all duration-200" id="nav-test-model">
                        模型测试
                    </a>
                    <a href="/module/NGD智能客服对话模块/意图模型管理/高级设置" class="pb-4 text-lg font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 border-b-2 border-transparent transition-all duration-200" id="nav-advanced-settings">
                        高级设置
                    </a>
                    <a href="/module/NGD智能客服对话模块/意图模型管理/第三方模型" class="pb-4 text-lg font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 border-b-2 border-transparent transition-all duration-200" id="nav-third-party-models">
                        第三方模型
                    </a>
                </nav>
            </div>
        </header>

        <!-- 批量操作工具栏 -->
        <div id="batch-actions" class="flex flex-wrap justify-between items-center mb-6 p-4 bg-white dark:bg-dark-card rounded-lg shadow-sm border border-gray-200 dark:border-gray-800">
            <div class="flex items-center space-x-4 mb-3 sm:mb-0">
                <input type="checkbox" id="select-all-models" class="w-5 h-5 text-primary focus:ring-primary border-gray-300 dark:border-gray-600 rounded">
                <label for="select-all-models" class="text-sm text-gray-700 dark:text-gray-300">全选</label>
                <span id="selected-count" class="text-sm text-gray-500 dark:text-gray-400">已选择: 0</span>
            </div>
            <div class="flex flex-wrap gap-3">
                <button id="batch-delete-btn" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md transition-colors duration-200 flex items-center opacity-50 cursor-not-allowed" disabled>
                    <i class="fa fa-trash mr-1"></i> 批量删除
                </button>
                <button id="import-btn" class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-md transition-colors duration-200 flex items-center">
                    <i class="fa fa-upload mr-1"></i> 导入
                </button>
                <button id="export-btn" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors duration-200 flex items-center">
                    <i class="fa fa-download mr-1"></i> 导出
                </button>
                <button id="add-model-btn" class="px-4 py-2 bg-primary hover:bg-primary/90 text-white rounded-md transition-colors duration-200 flex items-center">
                    <i class="fa fa-plus mr-1"></i> 新增模型
                </button>
            </div>
        </div>

        <!-- 搜索和筛选 -->
        <div class="flex flex-wrap justify-between items-center mb-6 gap-4">
            <div class="relative w-full sm:w-auto">
                <input type="text" id="model-search" placeholder="搜索模型..." class="pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent w-full sm:w-64 bg-white dark:bg-dark-card text-gray-900 dark:text-white">
                <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            </div>
            <select id="status-filter" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-dark-card text-gray-900 dark:text-white">
                <option value="all">全部状态</option>
                <option value="draft">草稿</option>
                <option value="training">训练中</option>
                <option value="trained">已训练</option>
                <option value="deployed">已部署</option>
                <option value="failed">训练失败</option>
            </select>
        </div>

        <!-- 模型列表 -->
        <div id="models-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- 模型卡片将通过JavaScript动态生成 -->
        </div>

        <!-- 无搜索结果提示 -->
        <div id="no-search-results" class="hidden text-center py-12 col-span-full">
            <div class="text-gray-400 text-5xl mb-4"><i class="fa fa-search"></i></div>
            <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2">没有找到匹配的模型</h3>
            <p class="text-gray-500 dark:text-gray-400">请尝试使用其他搜索词或清除筛选条件</p>
        </div>
    </div>

    <script>
        // 模拟意图模型数据
        const modelData = [
            { id: 1, name: "基础意图识别模型", description: "通用意图识别基础模型", status: "deployed", algorithm: "BERT", trainingDataSize: 10000, accuracy: 0.92, createTime: "2023-09-15", updateTime: "2023-10-10", version: "1.2.0", creator: "张三" },
            { id: 2, name: "客服意图专用模型", description: "针对客服场景优化的意图模型", status: "deployed", algorithm: "RoBERTa", trainingDataSize: 8000, accuracy: 0.94, createTime: "2023-08-22", updateTime: "2023-10-05", version: "1.1.0", creator: "李四" },
            { id: 3, name: "金融行业意图模型", description: "金融行业特定意图识别模型", status: "training", algorithm: "ALBERT", trainingDataSize: 12000, accuracy: 0.88, createTime: "2023-10-01", updateTime: "2023-10-03", version: "0.9.0", creator: "王五" },
            { id: 4, name: "电商意图识别模型", description: "电商场景下的用户意图识别", status: "deployed", algorithm: "BERT", trainingDataSize: 15000, accuracy: 0.91, createTime: "2023-07-18", updateTime: "2023-09-25", version: "1.0.1", creator: "赵六" },
            { id: 5, name: "医疗意图模型", description: "医疗咨询场景意图识别", status: "failed", algorithm: "GPT-3", trainingDataSize: 6000, accuracy: 0.75, createTime: "2023-09-30", updateTime: "2023-10-02", version: "0.8.0", creator: "钱七" },
            { id: 6, name: "旅游意图识别模型", description: "旅游服务场景意图识别", status: "draft", algorithm: "RoBERTa", trainingDataSize: 0, accuracy: 0, createTime: "2023-10-05", updateTime: "2023-10-06", version: "0.5.0", creator: "孙八" },
            { id: 7, name: "教育意图模型", description: "在线教育场景意图识别", status: "deployed", algorithm: "ALBERT", trainingDataSize: 9000, accuracy: 0.89, createTime: "2023-06-15", updateTime: "2023-09-18", version: "1.3.0", creator: "周九" },
            { id: 8, name: "多轮对话意图模型", description: "支持多轮对话的意图追踪模型", status: "deployed", algorithm: "BERT", trainingDataSize: 11000, accuracy: 0.90, createTime: "2023-08-10", updateTime: "2023-10-08", version: "1.1.2", creator: "吴十" },
            { id: 9, name: "情感意图融合模型", description: "融合情感分析的意图识别模型", status: "training", algorithm: "GPT-3", trainingDataSize: 7000, accuracy: 0.85, createTime: "2023-09-20", updateTime: "2023-10-01", version: "0.9.5", creator: "郑一" },
            { id: 10, name: "语音意图识别模型", description: "处理语音转文本后的意图识别", status: "deployed", algorithm: "RoBERTa", trainingDataSize: 8500, accuracy: 0.93, createTime: "2023-07-05", updateTime: "2023-09-30", version: "1.2.1", creator: "王二" },
            { id: 11, name: "小样本意图模型", description: "基于小样本学习的意图识别", status: "deployed", algorithm: "ALBERT", trainingDataSize: 1200, accuracy: 0.82, createTime: "2023-08-01", updateTime: "2023-10-04", version: "1.1.0", creator: "张三" },
            { id: 12, name: "多语言意图模型", description: "支持多语言的意图识别", status: "training", algorithm: "BERT", trainingDataSize: 20000, accuracy: 0.87, createTime: "2023-09-10", updateTime: "2023-10-02", version: "0.9.0", creator: "李四" },
            { id: 13, name: "垂直领域意图模型", description: "针对特定垂直领域优化", status: "deployed", algorithm: "RoBERTa", trainingDataSize: 9500, accuracy: 0.95, createTime: "2023-06-25", updateTime: "2023-09-20", version: "1.2.0", creator: "王五" },
            { id: 14, name: "儿童意图识别模型", description: "针对儿童语言特点优化", status: "deployed", algorithm: "ALBERT", trainingDataSize: 5000, accuracy: 0.86, createTime: "2023-07-30", updateTime: "2023-10-07", version: "1.1.5", creator: "赵六" },
            { id: 15, name: "法律意图模型", description: "法律领域意图识别", status: "draft", algorithm: "BERT", trainingDataSize: 0, accuracy: 0, createTime: "2023-10-03", updateTime: "2023-10-04", version: "0.6.0", creator: "钱七" },
            { id: 16, name: "社交媒体意图模型", description: "社交媒体文本意图识别", status: "failed", algorithm: "GPT-3", trainingDataSize: 4000, accuracy: 0.78, createTime: "2023-09-15", updateTime: "2023-09-20", version: "0.8.5", creator: "孙八" },
            { id: 17, name: "新闻意图分类模型", description: "新闻文本意图分类", status: "deployed", algorithm: "RoBERTa", trainingDataSize: 13000, accuracy: 0.91, createTime: "2023-07-10", updateTime: "2023-09-28", version: "1.0.3", creator: "周九" },
            { id: 18, name: "客服投诉意图模型", description: "专门处理客服投诉意图", status: "deployed", algorithm: "BERT", trainingDataSize: 7500, accuracy: 0.94, createTime: "2023-08-15", updateTime: "2023-10-06", version: "1.1.0", creator: "吴十" },
            { id: 19, name: "金融诈骗意图模型", description: "识别金融诈骗相关意图", status: "training", algorithm: "ALBERT", trainingDataSize: 8000, accuracy: 0.88, createTime: "2023-09-25", updateTime: "2023-10-01", version: "0.9.2", creator: "郑一" },
            { id: 20, name: "推荐系统意图模型", description: "推荐系统中的用户意图识别", status: "deployed", algorithm: "RoBERTa", trainingDataSize: 14000, accuracy: 0.92, createTime: "2023-06-20", updateTime: "2023-09-15", version: "1.2.0", creator: "王二" }
        ];

        // 渲染模型列表
        function renderModelList(models) {
            const container = document.getElementById('models-container');
            const noResults = document.getElementById('no-search-results');

            if (models.length === 0) {
                container.classList.add('hidden');
                noResults.classList.remove('hidden');
                return;
            }

            container.classList.remove('hidden');
            noResults.classList.add('hidden');

            container.innerHTML = '';

            models.forEach(model => {
                let statusClass = '';
                let statusText = '';

                switch (model.status) {
                    case 'deployed':
                        statusClass = 'bg-green-100 text-green-800';
                        statusText = '已部署';
                        break;
                    case 'training':
                        statusClass = 'bg-blue-100 text-blue-800';
                        statusText = '训练中';
                        break;
                    case 'trained':
                        statusClass = 'bg-purple-100 text-purple-800';
                        statusText = '已训练';
                        break;
                    case 'draft':
                        statusClass = 'bg-gray-100 text-gray-800';
                        statusText = '草稿';
                        break;
                    case 'failed':
                        statusClass = 'bg-red-100 text-red-800';
                        statusText = '训练失败';
                        break;
                }

                // 算法颜色标识
                let algorithmClass = '';
                switch (model.algorithm) {
                    case 'BERT':
                        algorithmClass = 'bg-blue-500 text-white';
                        break;
                    case 'RoBERTa':
                        algorithmClass = 'bg-purple-500 text-white';
                        break;
                    case 'ALBERT':
                        algorithmClass = 'bg-green-500 text-white';
                        break;
                    case 'GPT-3':
                        algorithmClass = 'bg-yellow-500 text-white';
                        break;
                }

                const modelCard = document.createElement('div');
                modelCard.className = 'bg-white dark:bg-dark-card rounded-lg shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden transition-all duration-200 hover:shadow-md';
                modelCard.innerHTML = `
                    <div class="p-5">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="font-medium text-lg">${model.name}</h3>
                                <div class="flex items-center gap-2 mt-1">
                                    <span class="inline-block px-2 py-0.5 rounded-full text-xs font-medium ${statusClass}">${statusText}</span>
                                    <span class="inline-block px-2 py-0.5 rounded-full text-xs font-medium ${algorithmClass}">${model.algorithm}</span>
                                </div>
                            </div>
                            <input type="checkbox" class="model-checkbox w-5 h-5 text-primary focus:ring-primary border-gray-300 dark:border-gray-600 rounded" data-id="${model.id}">
                        </div>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">${model.description}</p>
                        <div class="grid grid-cols-2 gap-2 text-sm text-gray-500 dark:text-gray-400 mb-4">
                            <div>训练数据量: ${model.trainingDataSize}</div>
                            <div>准确率: ${model.accuracy * 100}%</div>
                            <div>版本: ${model.version}</div>
                            <div>创建人: ${model.creator}</div>
                        </div>
                        <div class="grid grid-cols-2 gap-2 text-sm text-gray-500 dark:text-gray-400 mb-4">
                            <div>创建时间: ${model.createTime}</div>
                            <div>更新时间: ${model.updateTime}</div>
                        </div>
                        <div class="flex gap-2 mt-4">
                            <button class="edit-btn flex-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-colors duration-200 text-sm flex items-center justify-center gap-1" data-id="${model.id}">
                                <i class="fa fa-edit"></i> 编辑
                            </button>
                            <button class="delete-btn px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md transition-colors duration-200 text-sm flex items-center justify-center gap-1" data-id="${model.id}">
                                <i class="fa fa-trash"></i> 删除
                            </button>
                        </div>
                        <div class="flex gap-2 mt-2">
                            <button class="detail-btn w-full px-3 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md transition-colors duration-200 text-sm flex items-center justify-center gap-1" data-id="${model.id}">
                                <i class="fa fa-eye"></i> 查看详情
                            </button>
                        </div>
                    </div>
                `;

                container.appendChild(modelCard);
            });

            // 添加事件监听器
            document.querySelectorAll('.model-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updateBatchActions);
            });

            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const modelId = this.getAttribute('data-id');
                    editModel(modelId);
                });
            });

            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const modelId = this.getAttribute('data-id');
                    deleteModel(modelId);
                });
            });

            document.querySelectorAll('.detail-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const modelId = this.getAttribute('data-id');
                    viewModelDetail(modelId);
                });
            });
        }

        // 更新批量操作按钮状态
        function updateBatchActions() {
            const checkboxes = document.querySelectorAll('.model-checkbox:checked');
            const count = checkboxes.length;
            const batchDeleteBtn = document.getElementById('batch-delete-btn');
            const selectedCount = document.getElementById('selected-count');

            selectedCount.textContent = `已选择: ${count}`;

            if (count > 0) {
                batchDeleteBtn.disabled = false;
                batchDeleteBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                batchDeleteBtn.disabled = true;
                batchDeleteBtn.classList.add('opacity-50', 'cursor-not-allowed');
            }
        }

        // 全选/取消全选
        document.getElementById('select-all-models').addEventListener('change', function() {
            const isChecked = this.checked;
            document.querySelectorAll('.model-checkbox').forEach(checkbox => {
                checkbox.checked = isChecked;
            });
            updateBatchActions();
        });

        // 搜索功能
        document.getElementById('model-search').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase().trim();
            const statusFilter = document.getElementById('status-filter').value;
            filterModels(searchTerm, statusFilter);
        });

        // 状态筛选
        document.getElementById('status-filter').addEventListener('change', function() {
            const statusFilter = this.value;
            const searchTerm = document.getElementById('model-search').value.toLowerCase().trim();
            filterModels(searchTerm, statusFilter);
        });

        // 筛选模型
        function filterModels(searchTerm, statusFilter) {
            let filteredModels = modelData;

            if (statusFilter !== 'all') {
                filteredModels = filteredModels.filter(model => model.status === statusFilter);
            }

            if (searchTerm) {
                filteredModels = filteredModels.filter(model => 
                    model.name.toLowerCase().includes(searchTerm) || 
                    model.description.toLowerCase().includes(searchTerm) || 
                    model.creator.toLowerCase().includes(searchTerm) ||
                    model.algorithm.toLowerCase().includes(searchTerm)
                );
            }

            renderModelList(filteredModels);
        }

        // 编辑模型
        function editModel(id) {
            // 这里是编辑模型的逻辑
            alert(`编辑模型 ID: ${id}`);
            // 实际应用中，这里会跳转到编辑页面或打开编辑模态框
        }

        // 删除模型
        function deleteModel(id) {
            if (confirm('确定要删除这个模型吗？')) {
                // 这里是删除模型的逻辑
                alert(`删除模型 ID: ${id}`);
                // 实际应用中，这里会发送删除请求到服务器
                // 然后刷新列表
                renderModelList(modelData.filter(model => model.id !== parseInt(id)));
            }
        }

        // 查看模型详情
        function viewModelDetail(id) {
            // 这里是查看模型详情的逻辑
            alert(`查看模型详情 ID: ${id}`);
            // 实际应用中，这里会跳转到详情页面或打开详情模态框
        }

        // 批量删除
        document.getElementById('batch-delete-btn').addEventListener('click', function() {
            if (confirm('确定要删除选中的模型吗？')) {
                const checkedIds = Array.from(document.querySelectorAll('.model-checkbox:checked'))
                    .map(checkbox => parseInt(checkbox.getAttribute('data-id')));

                // 这里是批量删除的逻辑
                alert(`批量删除模型 IDs: ${checkedIds.join(', ')}`);
                // 实际应用中，这里会发送批量删除请求到服务器
                // 然后刷新列表
                renderModelList(modelData.filter(model => !checkedIds.includes(model.id)));
                document.getElementById('select-all-models').checked = false;
            }
        });

        // 新增模型
        document.getElementById('add-model-btn').addEventListener('click', function() {
            // 这里是新增模型的逻辑
            alert('新增模型');
            // 实际应用中，这里会跳转到新增页面或打开新增模态框
        });

        // 初始渲染
        renderModelList(modelData);
    </script>
</body>
</html>